/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * Copyright (c) 2023 STMicroelectronics.
  * All rights reserved.
  *
  * This software is licensed under terms that can be found in the LICENSE file
  * in the root directory of this software component.
  * If no LICENSE file comes with this software, it is provided AS-IS.
  *
  ******************************************************************************
  */
/* USER CODE END Header */
/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "crc.h"
#include "gpio.h"
#include "fmc.h"
#include "app_x-cube-ai.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include <stdio.h>
#include <string.h>
#include "lcd.h"
#include "sys.h"
#include "delay.h"
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/

/* USER CODE BEGIN PV */

/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
/* USER CODE BEGIN PFP */

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */
AI_ALIGNED(32)
static ai_handle network = AI_HANDLE_NULL;
AI_ALIGNED(32)
static ai_u8 activations_f01[AI_NETWORK_F01_DATA_ACTIVATIONS_SIZE];
static ai_u8 activations_f02[AI_NETWORK_F02_DATA_ACTIVATIONS_SIZE];
static ai_u8 activations_fu[AI_NETWORK_FU_DATA_ACTIVATIONS_SIZE];
static ai_u8 activations_fx[AI_NETWORK_FX_DATA_ACTIVATIONS_SIZE];
static ai_u8 activations_fy[AI_NETWORK_FY_DATA_ACTIVATIONS_SIZE];

static ai_float in_data_f01[AI_NETWORK_F01_IN_1_SIZE];
static ai_float in_data_f02[AI_NETWORK_F02_IN_1_SIZE];
static ai_float in_data_fu[AI_NETWORK_FU_IN_1_SIZE];
static ai_float in_data_fx[AI_NETWORK_FX_IN_1_SIZE];
static ai_float in_data_fy[AI_NETWORK_FY_IN_1_SIZE];

static ai_float out_data_f01[AI_NETWORK_F01_OUT_1_SIZE];
static ai_float out_data_f02[AI_NETWORK_F02_OUT_1_SIZE];
static ai_float out_data_fu[AI_NETWORK_FU_OUT_1_SIZE];
static ai_float out_data_fx[AI_NETWORK_FX_OUT_1_SIZE];
static ai_float out_data_fy[AI_NETWORK_FY_OUT_1_SIZE];

static ai_buffer *ai_input_f01;
static ai_buffer *ai_output_f01;
static ai_buffer *ai_input_f02;
static ai_buffer *ai_output_f02;
static ai_buffer *ai_input_fu;
static ai_buffer *ai_output_fu;
static ai_buffer *ai_input_fx;
static ai_buffer *ai_output_fx;
static ai_buffer *ai_input_fy;
static ai_buffer *ai_output_fy;


float input_f01[64]={8.477944135665893555e-01,5.344344377517700195e-01,7.870666384696960449e-01,1.044363141059875488e+00,
8.474816679954528809e-01,5.345278978347778320e-01,7.870666384696960449e-01,1.043593883514404297e+00,
8.450333476066589355e-01,5.347828865051269531e-01,7.870666384696960449e-01,1.042681217193603516e+00,
8.445119261741638184e-01,5.345383882522583008e-01,7.870666384696960449e-01,1.044728636741638184e+00,
8.447457551956176758e-01,5.342961549758911133e-01,7.870666384696960449e-01,1.044870257377624512e+00,
8.430724143981933594e-01,5.346496105194091797e-01,7.870666384696960449e-01,1.044584512710571289e+00,
8.391920328140258789e-01,5.350270867347717285e-01,7.870666384696960449e-01,1.043910026550292969e+00,
8.435274958610534668e-01,5.352625250816345215e-01,7.870666384696960449e-01,1.044109582901000977e+00,
8.487653136253356934e-01,5.356220602989196777e-01,7.870666384696960449e-01,1.044720172882080078e+00,
8.532651662826538086e-01,5.350840687751770020e-01,7.870666384696960449e-01,1.045063614845275879e+00,
8.525797724723815918e-01,5.349774956703186035e-01,7.870666384696960449e-01,1.044370532035827637e+00,
8.515066504478454590e-01,5.345005989074707031e-01,7.870666384696960449e-01,1.043983340263366699e+00,
8.523135781288146973e-01,5.348849296569824219e-01,7.870666384696960449e-01,1.044556379318237305e+00,
8.506684303283691406e-01,5.364005565643310547e-01,7.870666384696960449e-01,1.044690489768981934e+00,
8.472429513931274414e-01,5.356667637825012207e-01,7.870666384696960449e-01,1.044873356819152832e+00,
8.344804644584655762e-01,5.358564853668212891e-01,7.870666384696960449e-01,1.044443249702453613e+00};
float output_f01[56];
float input_f02[56];
float output_f02[48];
float input_fu_a[128][10]={1.993289440870285034e-01,1.923294663429260254e-01,-9.737824201583862305e-01,2.128760367631912231e-01,7.499917745590209961e-01,3.050623834133148193e-01,-6.885003447532653809e-01,2.748489975929260254e-01,7.413330674171447754e-01,9.967790246009826660e-01,
2.038079947233200073e-01,1.881244033575057983e-01,-9.737285971641540527e-01,2.130321264266967773e-01,7.499917149543762207e-01,3.050377070903778076e-01,-6.884378194808959961e-01,2.747851014137268066e-01,7.412512898445129395e-01,9.967598319053649902e-01,
2.063447237014770508e-01,1.914140433073043823e-01,-9.738019108772277832e-01,2.129340767860412598e-01,7.499917149543762207e-01,3.050490319728851318e-01,-6.884387135505676270e-01,2.747798562049865723e-01,7.412501573562622070e-01,9.968104958534240723e-01,
2.043259739875793457e-01,1.912055760622024536e-01,-9.731622338294982910e-01,2.131949812173843384e-01,7.499914169311523438e-01,3.048634529113769531e-01,-6.882404685020446777e-01,2.745858728885650635e-01,7.409941554069519043e-01,9.962413907051086426e-01,
1.992544382810592651e-01,1.890900582075119019e-01,-9.731317758560180664e-01,2.132845818996429443e-01,7.499915361404418945e-01,3.047932684421539307e-01,-6.881532073020935059e-01,2.744435667991638184e-01,7.408604025840759277e-01,9.962307810783386230e-01,
1.987280100584030151e-01,1.927801519632339478e-01,-9.730777740478515625e-01,2.132709026336669922e-01,7.499915957450866699e-01,3.047770857810974121e-01,-6.881043910980224609e-01,2.743898034095764160e-01,7.407951354980468750e-01,9.961751699447631836e-01,
2.035908401012420654e-01,1.886948645114898682e-01,-9.729701876640319824e-01,2.133425921201705933e-01,7.499917149543762207e-01,3.046907186508178711e-01,-6.879388093948364258e-01,2.742178738117218018e-01,7.405776381492614746e-01,9.960854053497314453e-01,
2.054983079433441162e-01,1.919408589601516724e-01,-9.731258153915405273e-01,2.133949697017669678e-01,7.499918341636657715e-01,3.047094941139221191e-01,-6.878830790519714355e-01,2.741655111312866211e-01,7.405064702033996582e-01,9.962486028671264648e-01,
2.025121301412582397e-01,1.915664374828338623e-01,-9.736455082893371582e-01,2.130708545446395874e-01,7.499917149543762207e-01,3.049250245094299316e-01,-6.880637407302856445e-01,2.743356227874755859e-01,7.407373189926147461e-01,9.966869354248046875e-01,
1.987874358892440796e-01,1.895666122436523438e-01,-9.734628200531005859e-01,2.131328284740447998e-01,7.499917149543762207e-01,3.048305511474609375e-01,-6.880071759223937988e-01,2.743286490440368652e-01,7.406821846961975098e-01,9.965217709541320801e-01,
1.988334208726882935e-01,1.933692842721939087e-01,-9.735370278358459473e-01,2.130728363990783691e-01,7.499915957450866699e-01,3.048582375049591064e-01,-6.881086826324462891e-01,2.744151055812835693e-01,7.408084869384765625e-01,9.965813755989074707e-01,
1.992932409048080444e-01,1.895629763603210449e-01,-9.735878705978393555e-01,2.132192850112915039e-01,7.499915361404418945e-01,3.048439919948577881e-01,-6.880155801773071289e-01,2.742980122566223145e-01,7.406786084175109863e-01,9.966623187065124512e-01,
1.986011862754821777e-01,1.925250887870788574e-01,-9.733410477638244629e-01,2.131725698709487915e-01,7.499915361404418945e-01,3.047821819782257080e-01,-6.879156231880187988e-01,2.742458581924438477e-01,7.405664324760437012e-01,9.964112639427185059e-01,
1.985127925872802734e-01,1.920673400163650513e-01,-9.735404253005981445e-01,2.130400538444519043e-01,7.499915957450866699e-01,3.048519492149353027e-01,-6.880741119384765625e-01,2.743979990482330322e-01,7.407700419425964355e-01,9.965777397155761719e-01,
1.985066682100296021e-01,1.903211325407028198e-01,-9.732781052589416504e-01,2.132202535867691040e-01,7.499917149543762207e-01,3.047153949737548828e-01,-6.878780126571655273e-01,2.741701900959014893e-01,7.405035495758056641e-01,9.963599443435668945e-01,
1.985062360763549805e-01,1.933992654085159302e-01,-9.734939336776733398e-01,2.127459943294525146e-01,7.499917149543762207e-01,3.048301041126251221e-01,-6.880715489387512207e-01,2.743752896785736084e-01,7.407592535018920898e-01,9.964694976806640625e-01,
1.985062062740325928e-01,1.898081004619598389e-01,-9.732677936553955078e-01,2.128870040178298950e-01,7.499915361404418945e-01,3.047244250774383545e-01,-6.880024075508117676e-01,2.743255794048309326e-01,7.406766414642333984e-01,9.962786436080932617e-01,
1.986196041107177734e-01,1.927709728479385376e-01,-9.735137820243835449e-01,2.127278298139572144e-01,7.499914765357971191e-01,3.048308193683624268e-01,-6.880939602851867676e-01,2.744113206863403320e-01,7.407934069633483887e-01,9.964849352836608887e-01,
1.990952342748641968e-01,1.921867430210113525e-01,-9.734607934951782227e-01,2.127080112695693970e-01,7.499917745590209961e-01,3.048797845840454102e-01,-6.881301403045654297e-01,2.744564116001129150e-01,7.408437132835388184e-01,9.964289665222167969e-01,
1.987760365009307861e-01,1.907091885805130005e-01,-9.733405113220214844e-01,2.126599699258804321e-01,7.499913573265075684e-01,3.048329055309295654e-01,-6.881025433540344238e-01,2.744284272193908691e-01,7.408077120780944824e-01,9.963012337684631348e-01,
2.017139941453933716e-01,1.938300579786300659e-01,-9.735624194145202637e-01,2.126626968383789062e-01,7.499915957450866699e-01,3.048880994319915771e-01,-6.881946921348571777e-01,2.745171785354614258e-01,7.409262061119079590e-01,9.965186119079589844e-01,
2.016094028949737549e-01,1.901825070381164551e-01,-9.736862182617187500e-01,2.125656455755233765e-01,7.499915957450866699e-01,3.049058318138122559e-01,-6.881762742996215820e-01,2.744760811328887939e-01,7.408939003944396973e-01,9.966188073158264160e-01,
1.988143026828765869e-01,1.930254995822906494e-01,-9.735500216484069824e-01,2.124661803245544434e-01,7.499914765357971191e-01,3.049003183841705322e-01,-6.881741285324096680e-01,2.744756937026977539e-01,7.408916950225830078e-01,9.964645504951477051e-01,
1.985276043415069580e-01,1.923667490482330322e-01,-9.731374382972717285e-01,2.125321030616760254e-01,7.499918341636657715e-01,3.047740161418914795e-01,-6.881539225578308105e-01,2.744610309600830078e-01,7.408675551414489746e-01,9.960755109786987305e-01,
1.985076963901519775e-01,1.909574717283248901e-01,-9.728723764419555664e-01,2.124929130077362061e-01,7.499913573265075684e-01,3.047096431255340576e-01,-6.880954504013061523e-01,2.744416296482086182e-01,7.408059835433959961e-01,9.958081841468811035e-01,
1.985062956809997559e-01,1.939969956874847412e-01,-9.733601808547973633e-01,2.122672796249389648e-01,7.499916553497314453e-01,3.048287630081176758e-01,-6.881808042526245117e-01,2.744999229907989502e-01,7.409068942070007324e-01,9.962366223335266113e-01,
1.985703706741333008e-01,1.904957145452499390e-01,-9.732281565666198730e-01,2.125399112701416016e-01,7.499912381172180176e-01,3.047631680965423584e-01,-6.880511045455932617e-01,2.744472026824951172e-01,7.407668828964233398e-01,9.961658120155334473e-01,
1.985692083835601807e-01,1.929408162832260132e-01,-9.732227921485900879e-01,2.124718874692916870e-01,7.499916553497314453e-01,3.047639727592468262e-01,-6.881346106529235840e-01,2.744940817356109619e-01,7.408618330955505371e-01,9.961460828781127930e-01,
1.985479593276977539e-01,1.926905214786529541e-01,-9.729948639869689941e-01,2.121235877275466919e-01,7.499915361404418945e-01,3.047681748867034912e-01,-6.882820725440979004e-01,2.746206521987915039e-01,7.410457134246826172e-01,9.958491325378417969e-01,
2.064753472805023193e-01,1.911762058734893799e-01,-9.733847379684448242e-01,2.119637727737426758e-01,7.499914169311523438e-01,3.049044907093048096e-01,-6.884278059005737305e-01,2.747745811939239502e-01,7.412381172180175781e-01,9.961960911750793457e-01,
2.109520286321640015e-01,1.940948665142059326e-01,-9.736757278442382812e-01,2.120431512594223022e-01,7.499916553497314453e-01,3.049349188804626465e-01,-6.883652806282043457e-01,2.747044265270233154e-01,7.411540746688842773e-01,9.964972734451293945e-01,
2.096253633499145508e-01,1.908980756998062134e-01,-9.736491441726684570e-01,2.116231769323348999e-01,7.499912381172180176e-01,3.049893677234649658e-01,-6.885052919387817383e-01,2.748609781265258789e-01,7.413421273231506348e-01,9.963819980621337891e-01,
2.026232033967971802e-01,1.931694746017456055e-01,-9.735795855522155762e-01,2.115611881017684937e-01,7.499916553497314453e-01,3.049664199352264404e-01,-6.885452866554260254e-01,2.749412655830383301e-01,7.414090037345886230e-01,9.963008761405944824e-01,
2.016092538833618164e-01,1.927286684513092041e-01,-9.731138348579406738e-01,2.116560786962509155e-01,7.499914169311523438e-01,3.048140406608581543e-01,-6.885112524032592773e-01,2.749077677726745605e-01,7.413649559020996094e-01,9.958658814430236816e-01,
1.987431943416595459e-01,1.916118264198303223e-01,-9.727345108985900879e-01,2.114875763654708862e-01,7.499915361404418945e-01,3.047594428062438965e-01,-6.885197162628173828e-01,2.749408185482025146e-01,7.413850426673889160e-01,9.954594373703002930e-01,
1.985226720571517944e-01,1.942273378372192383e-01,-9.728227853775024414e-01,2.115011066198348999e-01,7.499914765357971191e-01,3.047516644001007080e-01,-6.886019110679626465e-01,2.750338315963745117e-01,7.414959073066711426e-01,9.955485463142395020e-01,
1.985073536634445190e-01,1.907945573329925537e-01,-9.728455543518066406e-01,2.115078270435333252e-01,7.499915957450866699e-01,3.047731816768646240e-01,-6.886501312255859375e-01,2.750577926635742188e-01,7.415496110916137695e-01,9.955722689628601074e-01,
1.987384408712387085e-01,1.932341903448104858e-01,-9.726588129997253418e-01,2.116459459066390991e-01,7.499918341636657715e-01,3.046707808971405029e-01,-6.884445548057556152e-01,2.749441862106323242e-01,7.413165569305419922e-01,9.954191446304321289e-01,
1.991470903158187866e-01,1.929084807634353638e-01,-9.733994007110595703e-01,2.111669033765792847e-01,7.499911785125732422e-01,3.049354255199432373e-01,-6.887449622154235840e-01,2.752021551132202148e-01,7.416911721229553223e-01,9.960411190986633301e-01,
1.986618787050247192e-01,1.915639191865921021e-01,-9.736130833625793457e-01,2.109390348196029663e-01,7.499918937683105469e-01,3.050253093242645264e-01,-6.888734102249145508e-01,2.753010094165802002e-01,7.418471574783325195e-01,9.962016940116882324e-01,
1.985170245170593262e-01,1.944160908460617065e-01,-9.734911322593688965e-01,2.110231816768646240e-01,7.499912977218627930e-01,3.049685359001159668e-01,-6.887629628181457520e-01,2.752572596073150635e-01,7.417283654212951660e-01,9.961003661155700684e-01,
1.985069513320922852e-01,1.909130215644836426e-01,-9.732946753501892090e-01,2.111064493656158447e-01,7.499916553497314453e-01,3.049367070198059082e-01,-6.887368559837341309e-01,2.752688229084014893e-01,7.417084574699401855e-01,9.959259629249572754e-01,
1.985062509775161743e-01,1.934258937835693359e-01,-9.734154343605041504e-01,2.111967951059341431e-01,7.499915957450866699e-01,3.049163222312927246e-01,-6.886962056159973145e-01,2.751960158348083496e-01,7.416436076164245605e-01,9.960631132125854492e-01,
1.985062062740325928e-01,1.928128749132156372e-01,-9.732313752174377441e-01,2.110939174890518188e-01,7.499915361404418945e-01,3.048919439315795898e-01,-6.886702775955200195e-01,2.750980854034423828e-01,7.415832877159118652e-01,9.958614706993103027e-01,
1.985703706741333008e-01,1.917943358421325684e-01,-9.727262854576110840e-01,2.110846638679504395e-01,7.499918341636657715e-01,3.047250807285308838e-01,-6.886132955551147461e-01,2.750768065452575684e-01,7.415224313735961914e-01,9.953658580780029297e-01,
1.987600326538085938e-01,1.942913532257080078e-01,-9.727200865745544434e-01,2.112082242965698242e-01,7.499917149543762207e-01,3.046635389328002930e-01,-6.885566711425781250e-01,2.749671638011932373e-01,7.414291501045227051e-01,9.953860044479370117e-01,
1.987569630146026611e-01,1.909905821084976196e-01,-9.728325605392456055e-01,2.110981494188308716e-01,7.499918341636657715e-01,3.047146201133728027e-01,-6.885934472084045410e-01,2.750192880630493164e-01,7.414826750755310059e-01,9.954726099967956543e-01,
1.985984295606613159e-01,1.934909820556640625e-01,-9.727075099945068359e-01,2.110086977481842041e-01,7.499914765357971191e-01,3.047039210796356201e-01,-6.886035799980163574e-01,2.750999033451080322e-01,7.415220141410827637e-01,9.953314065933227539e-01,
1.988850235939025879e-01,1.928503215312957764e-01,-9.731710553169250488e-01,2.108361870050430298e-01,7.499915957450866699e-01,3.048464357852935791e-01,-6.887636184692382812e-01,2.752059102058410645e-01,7.417099475860595703e-01,9.957478642463684082e-01,
1.985361576080322266e-01,1.917823851108551025e-01,-9.735946059226989746e-01,2.106209099292755127e-01,7.499916553497314453e-01,3.049852848052978516e-01,-6.889196038246154785e-01,2.753744721412658691e-01,7.419173121452331543e-01,9.961162805557250977e-01,
1.995641589164733887e-01,1.945630460977554321e-01,-9.736334681510925293e-01,2.103205472230911255e-01,7.499915957450866699e-01,3.050646483898162842e-01,-6.889849305152893066e-01,2.754552364349365234e-01,7.420079708099365234e-01,9.960908293724060059e-01,
1.990902721881866455e-01,1.912705600261688232e-01,-9.737074971199035645e-01,2.103464752435684204e-01,7.499917745590209961e-01,3.050449788570404053e-01,-6.889457106590270996e-01,2.753996551036834717e-01,7.419509291648864746e-01,9.961686730384826660e-01,
1.990447193384170532e-01,1.937849372625350952e-01,-9.735543727874755859e-01,2.105572521686553955e-01,7.499915361404418945e-01,3.049252331256866455e-01,-6.888043284416198730e-01,2.752808034420013428e-01,7.417755722999572754e-01,9.960635304450988770e-01,
2.023991048336029053e-01,1.928653419017791748e-01,-9.735425114631652832e-01,2.101977765560150146e-01,7.499917149543762207e-01,3.049920797348022461e-01,-6.889348626136779785e-01,2.754006087779998779e-01,7.419412136077880859e-01,9.959759712219238281e-01,
2.049517184495925903e-01,1.918725371360778809e-01,-9.729169607162475586e-01,2.107117474079132080e-01,7.499916553497314453e-01,3.047458827495574951e-01,-6.886507868766784668e-01,2.751280963420867920e-01,7.415762543678283691e-01,9.954732060432434082e-01,
2.081813365221023560e-01,1.943775713443756104e-01,-9.729352593421936035e-01,2.106724232435226440e-01,7.499918341636657715e-01,3.047408461570739746e-01,-6.886975765228271484e-01,2.751406431198120117e-01,7.416244149208068848e-01,9.954828023910522461e-01,
2.130826711654663086e-01,1.909379065036773682e-01,-9.728189110755920410e-01,2.106316685676574707e-01,7.499915957450866699e-01,3.047213852405548096e-01,-6.886973381042480469e-01,2.751587033271789551e-01,7.416309118270874023e-01,9.953605532646179199e-01,
2.188975065946578979e-01,1.934985816478729248e-01,-9.730140566825866699e-01,2.105700522661209106e-01,7.499915957450866699e-01,3.047344386577606201e-01,-6.886704564094543457e-01,2.750833630561828613e-01,7.415779232978820801e-01,9.955381155014038086e-01,
2.151327431201934814e-01,1.926954984664916992e-01,-9.731523990631103516e-01,2.105906903743743896e-01,7.499915361404418945e-01,3.047566413879394531e-01,-6.886546611785888672e-01,2.751047313213348389e-01,7.415711879730224609e-01,9.956777095794677734e-01,
2.144846022129058838e-01,1.915411949157714844e-01,-9.733755588531494141e-01,2.104471772909164429e-01,7.499915957450866699e-01,3.048377335071563721e-01,-6.887375116348266602e-01,2.752615809440612793e-01,7.417063117027282715e-01,9.958655238151550293e-01,
2.095926403999328613e-01,1.941978484392166138e-01,-9.730708599090576172e-01,2.104287594556808472e-01,7.499915361404418945e-01,3.047731518745422363e-01,-6.887009739875793457e-01,2.752546072006225586e-01,7.416698336601257324e-01,9.955638051033020020e-01,
2.080235630273818970e-01,1.908385902643203735e-01,-9.731087684631347656e-01,2.105921357870101929e-01,7.499917149543762207e-01,3.047476708889007568e-01,-6.886325478553771973e-01,2.751455307006835938e-01,7.415657639503479004e-01,9.956353902816772461e-01,
2.056481093168258667e-01,1.933747529983520508e-01,-9.733430743217468262e-01,2.102575749158859253e-01,7.499916553497314453e-01,3.048771023750305176e-01,-6.887860894203186035e-01,2.752761840820312500e-01,7.417568564414978027e-01,9.957937002182006836e-01,
2.056566625833511353e-01,1.926256120204925537e-01,-9.732906818389892578e-01,2.102379649877548218e-01,7.499915957450866699e-01,3.048147261142730713e-01,-6.887302398681640625e-01,2.752053737640380859e-01,7.416787147521972656e-01,9.957383275032043457e-01,
2.118555754423141479e-01,1.916226595640182495e-01,-9.735218286514282227e-01,2.101912051439285278e-01,7.499918341636657715e-01,3.048818409442901611e-01,-6.887781023979187012e-01,2.752168774604797363e-01,7.417274117469787598e-01,9.959544539451599121e-01,
2.132481485605239868e-01,1.940548270940780640e-01,-9.732552766799926758e-01,2.100328505039215088e-01,7.499915957450866699e-01,3.048270642757415771e-01,-6.888236999511718750e-01,2.752817869186401367e-01,7.417938709259033203e-01,9.956604242324829102e-01,
2.137762755155563354e-01,1.911502629518508911e-01,-9.735451936721801758e-01,2.099091708660125732e-01,7.499917149543762207e-01,3.049190938472747803e-01,-6.888949871063232422e-01,2.753556966781616211e-01,7.418875098228454590e-01,9.959177374839782715e-01,
2.135804593563079834e-01,1.935670077800750732e-01,-9.731888771057128906e-01,2.102439552545547485e-01,7.499912977218627930e-01,3.047757148742675781e-01,-6.887812614440917969e-01,2.752670943737030029e-01,7.417489886283874512e-01,9.956400394439697266e-01,
2.127510309219360352e-01,1.925341039896011353e-01,-9.734511971473693848e-01,2.102009803056716919e-01,7.499915957450866699e-01,3.048450648784637451e-01,-6.888080239295959473e-01,2.753015756607055664e-01,7.417866587638854980e-01,9.958874583244323730e-01,
2.099772095680236816e-01,1.912583410739898682e-01,-9.730343222618103027e-01,2.102337926626205444e-01,7.499915957450866699e-01,3.046931028366088867e-01,-6.886203885078430176e-01,2.751073837280273438e-01,7.415403723716735840e-01,9.954869151115417480e-01,
2.131840288639068604e-01,1.939684599637985229e-01,-9.732989668846130371e-01,2.101086527109146118e-01,7.499913573265075684e-01,3.047719597816467285e-01,-6.886919140815734863e-01,2.751664817333221436e-01,7.416287064552307129e-01,9.957191348075866699e-01,
2.166457176208496094e-01,1.903756558895111084e-01,-9.735133051872253418e-01,2.099972218275070190e-01,7.499916553497314453e-01,3.048186302185058594e-01,-6.887804269790649414e-01,2.752647399902343750e-01,7.417473793029785156e-01,9.959051609039306641e-01,
2.180435657501220703e-01,1.928461790084838867e-01,-9.732702374458312988e-01,2.099826186895370483e-01,7.499912381172180176e-01,3.048050105571746826e-01,-6.886856555938720703e-01,2.752029597759246826e-01,7.416364550590515137e-01,9.956644773483276367e-01,
2.181831598281860352e-01,1.920493543148040771e-01,-9.727131128311157227e-01,2.102532088756561279e-01,7.499917745590209961e-01,3.046015799045562744e-01,-6.885744929313659668e-01,2.750774621963500977e-01,7.414866685867309570e-01,9.951770305633544922e-01,
2.199835181236267090e-01,1.910400986671447754e-01,-9.728578329086303711e-01,2.101605087518692017e-01,7.499912977218627930e-01,3.046284317970275879e-01,-6.886655688285827637e-01,2.751399874687194824e-01,7.415944337844848633e-01,9.952988624572753906e-01,
2.197328507900238037e-01,1.936888396739959717e-01,-9.728726744651794434e-01,2.101098001003265381e-01,7.499916553497314453e-01,3.046367764472961426e-01,-6.885596513748168945e-01,2.751238942146301270e-01,7.414900660514831543e-01,9.953027367591857910e-01,
2.188871353864669800e-01,1.901400834321975708e-01,-9.732267260551452637e-01,2.100769430398941040e-01,7.499914765357971191e-01,3.047153949737548828e-01,-6.886656284332275391e-01,2.752127945423126221e-01,7.416214942932128906e-01,9.956418275833129883e-01,
2.187027186155319214e-01,1.930231153964996338e-01,-9.730787873268127441e-01,2.101978957653045654e-01,7.499914169311523438e-01,3.046685755252838135e-01,-6.886077523231506348e-01,2.752213776111602783e-01,7.415709495544433594e-01,9.955227375030517578e-01,
2.160050570964813232e-01,1.916643828153610229e-01,-9.731004238128662109e-01,2.101253569126129150e-01,7.499917745590209961e-01,3.047134876251220703e-01,-6.886584162712097168e-01,2.751832008361816406e-01,7.416037917137145996e-01,9.955285787582397461e-01,
2.157990187406539917e-01,1.909739524126052856e-01,-9.726393222808837891e-01,2.102424651384353638e-01,7.499914169311523438e-01,3.045477569103240967e-01,-6.885532736778259277e-01,2.750701606273651123e-01,7.414641976356506348e-01,9.951025843620300293e-01,
2.124423384666442871e-01,1.935522407293319702e-01,-9.726993441581726074e-01,2.103281021118164062e-01,7.499915957450866699e-01,3.045209050178527832e-01,-6.884963512420654297e-01,2.750900685787200928e-01,7.414187192916870117e-01,9.951794147491455078e-01,
2.146547585725784302e-01,1.894968301057815552e-01,-9.729138612747192383e-01,2.100459188222885132e-01,7.499913573265075684e-01,3.045936226844787598e-01,-6.885803937911987305e-01,2.752245664596557617e-01,7.415466904640197754e-01,9.953294992446899414e-01,
2.147652208805084229e-01,1.926545053720474243e-01,-9.732758402824401855e-01,2.097739428281784058e-01,7.499915957450866699e-01,3.047490119934082031e-01,-6.887007951736450195e-01,2.752631604671478271e-01,7.416728734970092773e-01,9.956259727478027344e-01,
2.197120189666748047e-01,1.912302523851394653e-01,-9.730334877967834473e-01,2.100046128034591675e-01,7.499914169311523438e-01,3.046439588069915771e-01,-6.886017918586730957e-01,2.751838266849517822e-01,7.415514588356018066e-01,9.954376816749572754e-01,
2.193043977022171021e-01,1.906040459871292114e-01,-9.726040959358215332e-01,2.100341469049453735e-01,7.499915957450866699e-01,3.045052886009216309e-01,-6.885341405868530273e-01,2.751179039478302002e-01,7.414641380310058594e-01,9.950242042541503906e-01,
2.155705690383911133e-01,1.930015087127685547e-01,-9.725027084350585938e-01,2.100980877876281738e-01,7.499913573265075684e-01,3.044547140598297119e-01,-6.884617805480957031e-01,2.750044465065002441e-01,7.413548827171325684e-01,9.949386119842529297e-01,
2.147649973630905151e-01,1.887166500091552734e-01,-9.722761511802673340e-01,2.101650089025497437e-01,7.499916553497314453e-01,3.044092357158660889e-01,-6.884447336196899414e-01,2.750267684459686279e-01,7.413473129272460938e-01,9.947313070297241211e-01,
2.078030258417129517e-01,1.922416388988494873e-01,-9.724439382553100586e-01,2.099278271198272705e-01,7.499917745590209961e-01,3.044455945491790771e-01,-6.885356903076171875e-01,2.750691175460815430e-01,7.414475083351135254e-01,9.948452115058898926e-01,
2.132716923952102661e-01,1.906626671552658081e-01,-9.726412296295166016e-01,2.098981738090515137e-01,7.499916553497314453e-01,3.044852018356323242e-01,-6.884807944297790527e-01,2.749960124492645264e-01,7.413694262504577637e-01,9.950317740440368652e-01,
2.148576229810714722e-01,1.894652396440505981e-01,-9.730423092842102051e-01,2.099937796592712402e-01,7.499915957450866699e-01,3.045691549777984619e-01,-6.885091662406921387e-01,2.750686109066009521e-01,7.414227128028869629e-01,9.954440593719482422e-01,
2.135805785655975342e-01,1.925617158412933350e-01,-9.731805324554443359e-01,2.098956257104873657e-01,7.499914765357971191e-01,3.046253919601440430e-01,-6.886251568794250488e-01,2.751784324645996094e-01,7.415711283683776855e-01,9.955584406852722168e-01,
2.153511792421340942e-01,1.880860328674316406e-01,-9.731687307357788086e-01,2.096745520830154419e-01,7.499915957450866699e-01,3.046514093875885010e-01,-6.886512041091918945e-01,2.752458751201629639e-01,7.416203618049621582e-01,9.955002665519714355e-01,
2.191795110702514648e-01,1.917049437761306763e-01,-9.732014536857604980e-01,2.097588330507278442e-01,7.499911785125732422e-01,3.046293258666992188e-01,-6.886187791824340820e-01,2.751921713352203369e-01,7.415703535079956055e-01,9.955500364303588867e-01,
2.232317030429840088e-01,1.898004263639450073e-01,-9.731866717338562012e-01,2.095659822225570679e-01,7.499917745590209961e-01,3.046754598617553711e-01,-6.887384057044982910e-01,2.753307819366455078e-01,7.417328357696533203e-01,9.954950213432312012e-01,
2.232925295829772949e-01,1.894344538450241089e-01,-9.730775356292724609e-01,2.095502614974975586e-01,7.499912977218627930e-01,3.046330511569976807e-01,-6.886307001113891602e-01,2.752155959606170654e-01,7.415900826454162598e-01,9.953850507736206055e-01,
2.201321870088577271e-01,1.922593414783477783e-01,-9.724754095077514648e-01,2.099259793758392334e-01,7.499917149543762207e-01,3.044175207614898682e-01,-6.884301900863647461e-01,2.749879360198974609e-01,7.413194179534912109e-01,9.948755502700805664e-01,
2.161108255386352539e-01,1.874248683452606201e-01,-9.725733995437622070e-01,2.098973989486694336e-01,7.499917149543762207e-01,3.044074177742004395e-01,-6.884624958038330078e-01,2.750063836574554443e-01,7.413562536239624023e-01,9.949653148651123047e-01,
2.118595242500305176e-01,1.913246512413024902e-01,-9.725617766380310059e-01,2.096297889947891235e-01,7.499914169311523438e-01,3.044050931930541992e-01,-6.884725689888000488e-01,2.750009298324584961e-01,7.413636445999145508e-01,9.948975443840026855e-01,
2.093666791915893555e-01,1.894394010305404663e-01,-9.728058576583862305e-01,2.094860374927520752e-01,7.499918937683105469e-01,3.044663667678833008e-01,-6.885608434677124023e-01,2.750354409217834473e-01,7.414583563804626465e-01,9.951059222221374512e-01,
2.005554288625717163e-01,1.886944174766540527e-01,-9.731013178825378418e-01,2.095648348331451416e-01,7.499915361404418945e-01,3.045503199100494385e-01,-6.885766386985778809e-01,2.750615775585174561e-01,7.414827942848205566e-01,9.954113364219665527e-01,
1.990346312522888184e-01,1.915330588817596436e-01,-9.730525612831115723e-01,2.095332294702529907e-01,7.499921321868896484e-01,3.045827448368072510e-01,-6.885376572608947754e-01,2.750794291496276855e-01,7.414531707763671875e-01,9.953569769859313965e-01,
2.011024206876754761e-01,1.867561936378479004e-01,-9.732645153999328613e-01,2.095173001289367676e-01,7.499917149543762207e-01,3.046308457851409912e-01,-6.885799765586853027e-01,2.751243114471435547e-01,7.415091395378112793e-01,9.955608248710632324e-01,
2.041136473417282104e-01,1.907827258110046387e-01,-9.731128811836242676e-01,2.096331119537353516e-01,7.499915361404418945e-01,3.045452237129211426e-01,-6.885609626770019531e-01,2.751401960849761963e-01,7.414973378181457520e-01,9.954369664192199707e-01,
1.990633010864257812e-01,1.886757165193557739e-01,-9.733372330665588379e-01,2.093652486801147461e-01,7.499917149543762207e-01,3.046233654022216797e-01,-6.886044144630432129e-01,2.751531004905700684e-01,7.415424585342407227e-01,9.955999851226806641e-01,
1.990017741918563843e-01,1.881896108388900757e-01,-9.733339548110961914e-01,2.094305157661437988e-01,7.499912977218627930e-01,3.046064674854278564e-01,-6.885716319084167480e-01,2.751082479953765869e-01,7.414954304695129395e-01,9.956104755401611328e-01,
2.097465395927429199e-01,1.915639042854309082e-01,-9.729774594306945801e-01,2.096997499465942383e-01,7.499916553497314453e-01,3.044887781143188477e-01,-6.884441971778869629e-01,2.749150991439819336e-01,7.413054108619689941e-01,9.953186511993408203e-01,
2.149824053049087524e-01,1.871030777692794800e-01,-9.727475643157958984e-01,2.095962613821029663e-01,7.499913573265075684e-01,3.043683171272277832e-01,-6.883934736251831055e-01,2.748662233352661133e-01,7.412401437759399414e-01,9.950721263885498047e-01,
2.207775413990020752e-01,1.902611404657363892e-01,-9.727832674980163574e-01,2.094920128583908081e-01,7.499917149543762207e-01,3.044161200523376465e-01,-6.884722113609313965e-01,2.749286890029907227e-01,7.413364648818969727e-01,9.950850605964660645e-01,
2.200727909803390503e-01,1.887893378734588623e-01,-9.727886915206909180e-01,2.094364613294601440e-01,7.499914169311523438e-01,3.044032454490661621e-01,-6.884920001029968262e-01,2.749689519405364990e-01,7.413697838783264160e-01,9.950786828994750977e-01,
2.150864750146865845e-01,1.882601678371429443e-01,-9.731176495552062988e-01,2.093057036399841309e-01,7.499917149543762207e-01,3.045086264610290527e-01,-6.885439157485961914e-01,2.750634551048278809e-01,7.414531111717224121e-01,9.953728318214416504e-01,
2.155242413282394409e-01,1.913583874702453613e-01,-9.732279777526855469e-01,2.092294394969940186e-01,7.499913573265075684e-01,3.045765459537506104e-01,-6.886298656463623047e-01,2.751778662204742432e-01,7.415753006935119629e-01,9.954646229743957520e-01,
2.177660614252090454e-01,1.864162087440490723e-01,-9.730956554412841797e-01,2.094447612762451172e-01,7.499915361404418945e-01,3.045229017734527588e-01,-6.884400248527526855e-01,2.749716043472290039e-01,7.413225173950195312e-01,9.953804612159729004e-01,
2.189273685216903687e-01,1.910343617200851440e-01,-9.732407331466674805e-01,2.092724442481994629e-01,7.499916553497314453e-01,3.045895099639892578e-01,-6.884770393371582031e-01,2.749561965465545654e-01,7.413511872291564941e-01,9.954860806465148926e-01,
2.193291038274765015e-01,1.882122755050659180e-01,-9.733113646507263184e-01,2.092585265636444092e-01,7.499916553497314453e-01,3.045792281627655029e-01,-6.884639859199523926e-01,2.749719619750976562e-01,7.413449287414550781e-01,9.955521821975708008e-01,
2.200332731008529663e-01,1.880147904157638550e-01,-9.733607769012451172e-01,2.091595083475112915e-01,7.499915361404418945e-01,3.045942485332489014e-01,-6.885429024696350098e-01,2.750187516212463379e-01,7.414355278015136719e-01,9.955797195434570312e-01,
2.189880609512329102e-01,1.908987015485763550e-01,-9.731723070144653320e-01,2.093350440263748169e-01,7.499915361404418945e-01,3.045615553855895996e-01,-6.885055303573608398e-01,2.750279307365417480e-01,7.414042353630065918e-01,9.954323172569274902e-01,
2.191303819417953491e-01,1.863384395837783813e-01,-9.726254343986511230e-01,2.097191959619522095e-01,7.499916553497314453e-01,3.043369054794311523e-01,-6.882046461105346680e-01,2.748229205608367920e-01,7.410488128662109375e-01,9.949786067008972168e-01,
2.187731266021728516e-01,1.909846514463424683e-01,-9.731939435005187988e-01,2.093939185142517090e-01,7.499911785125732422e-01,3.045202493667602539e-01,-6.884396672248840332e-01,2.749752998352050781e-01,7.413235306739807129e-01,9.954659342765808105e-01,
2.144244313240051270e-01,1.879363358020782471e-01,-9.729384183883666992e-01,2.094318270683288574e-01,7.499915957450866699e-01,3.044458925724029541e-01,-6.883810758590698242e-01,2.749295830726623535e-01,7.412521839141845703e-01,9.952240586280822754e-01,
2.142217904329299927e-01,1.885393708944320679e-01,-9.732641577720642090e-01,2.090189456939697266e-01,7.499911785125732422e-01,3.045977056026458740e-01,-6.885486841201782227e-01,2.750842869281768799e-01,7.414652109146118164e-01,9.954558014869689941e-01,
2.144383639097213745e-01,1.909452229738235474e-01,-9.731479287147521973e-01,2.093718498945236206e-01,7.499912977218627930e-01,3.045514523983001709e-01,-6.884709596633911133e-01,2.749930620193481445e-01,7.413591742515563965e-01,9.954162836074829102e-01,
2.143025547266006470e-01,1.866414994001388550e-01,-9.730487465858459473e-01,2.093666344881057739e-01,7.499912977218627930e-01,3.044664561748504639e-01,-6.883767843246459961e-01,2.748552560806274414e-01,7.412205934524536133e-01,9.953181743621826172e-01,
2.097877264022827148e-01,1.910963207483291626e-01,-9.732058048248291016e-01,2.090162187814712524e-01,7.499912381172180176e-01,3.045791089534759521e-01,-6.884574294090270996e-01,2.749832570552825928e-01,7.413430213928222656e-01,9.953981041908264160e-01,
2.003215402364730835e-01,1.883282512426376343e-01,-9.732716083526611328e-01,2.090959101915359497e-01,7.499915957450866699e-01,3.045909404754638672e-01,-6.885243654251098633e-01,2.750615179538726807e-01,7.414341568946838379e-01,9.954791665077209473e-01,
2.031002342700958252e-01,1.889520883560180664e-01,-9.732388257980346680e-01,2.089988887310028076e-01,7.499913573265075684e-01,3.045879602432250977e-01,-6.885686516761779785e-01,2.750304341316223145e-01,7.414637804031372070e-01,9.954267740249633789e-01,
2.132795602083206177e-01,1.909026652574539185e-01,-9.728310108184814453e-01,2.090405821800231934e-01,7.499914765357971191e-01,3.044862151145935059e-01,-6.883987784385681152e-01,2.748525440692901611e-01,7.412400841712951660e-01,9.950367808341979980e-01,
2.163872718811035156e-01,1.870534867048263550e-01,-9.733803272247314453e-01,2.087278962135314941e-01,7.499912977218627930e-01,3.046427667140960693e-01,-6.886333823204040527e-01,2.751002311706542969e-01,7.415497899055480957e-01,9.955082535743713379e-01,
2.188149690628051758e-01,1.915410906076431274e-01,-9.735422134399414062e-01,2.088478654623031616e-01,7.499914169311523438e-01,3.046270310878753662e-01,-6.885473728179931641e-01,2.750131785869598389e-01,7.414376139640808105e-01,9.956917166709899902e-01,
};
float input_fu[10];
float output_fu[48];
float input_fx0[48];
float output_fx0[48];
float input_fx[48];
float output_fx[48];
float input_fy[48];
float output_fy[4];
float true_value[128][4]={8.444541096687316895e-01,5.355861186981201172e-01,7.870666384696960449e-01,1.044061541557312012e+00,
8.489671349525451660e-01,5.361953973770141602e-01,7.870666384696960449e-01,1.044388532638549805e+00,
8.525840044021606445e-01,5.353303551673889160e-01,7.870666384696960449e-01,1.044700860977172852e+00,
8.565113544464111328e-01,5.356600880622863770e-01,7.870666384696960449e-01,1.044627547264099121e+00,
8.560674190521240234e-01,5.346909761428833008e-01,7.870666384696960449e-01,1.044822216033935547e+00,
8.535380363464355469e-01,5.356764197349548340e-01,7.870666384696960449e-01,1.044102549552917480e+00,
8.528824448585510254e-01,5.356424450874328613e-01,7.870666384696960449e-01,1.044885396957397461e+00,
8.406161069869995117e-01,5.362676382064819336e-01,7.870666384696960449e-01,1.045142769813537598e+00,
8.409375548362731934e-01,5.356295704841613770e-01,7.870681285858154297e-01,1.045092821121215820e+00,
8.434016704559326172e-01,5.362589955329895020e-01,7.870686054229736328e-01,1.043846130371093750e+00,
8.409081697463989258e-01,5.362197160720825195e-01,7.870681881904602051e-01,1.043905854225158691e+00,
8.510238528251647949e-01,5.360926389694213867e-01,7.870667576789855957e-01,1.044110059738159180e+00,
8.537549376487731934e-01,5.358309745788574219e-01,7.870666384696960449e-01,1.044563412666320801e+00,
8.522968888282775879e-01,5.357613563537597656e-01,7.870666384696960449e-01,1.043903350830078125e+00,
8.571822047233581543e-01,5.362370014190673828e-01,7.870745062828063965e-01,1.043426156044006348e+00,
8.600363135337829590e-01,5.368972420692443848e-01,7.870682477951049805e-01,1.042930245399475098e+00,
8.540628552436828613e-01,5.358279347419738770e-01,7.870863676071166992e-01,1.044828653335571289e+00,
8.482134938240051270e-01,5.378909111022949219e-01,7.870711684226989746e-01,1.044603705406188965e+00,
8.554275035858154297e-01,5.392022728919982910e-01,7.870766520500183105e-01,1.044413208961486816e+00,
8.455972075462341309e-01,5.391640067100524902e-01,7.870734930038452148e-01,1.044308423995971680e+00,
8.503953814506530762e-01,5.390937924385070801e-01,7.870671153068542480e-01,1.045124769210815430e+00,
8.477143049240112305e-01,5.388786196708679199e-01,7.870666980743408203e-01,1.045131921768188477e+00,
8.508728146553039551e-01,5.386853814125061035e-01,7.870667576789855957e-01,1.045333623886108398e+00,
8.563645482063293457e-01,5.389233231544494629e-01,7.870680093765258789e-01,1.045191049575805664e+00,
8.579390645027160645e-01,5.387168526649475098e-01,7.870667576789855957e-01,1.045813441276550293e+00,
8.558293581008911133e-01,5.388272404670715332e-01,7.870666384696960449e-01,1.044880509376525879e+00,
8.593375682830810547e-01,5.390982031822204590e-01,7.870686650276184082e-01,1.045810461044311523e+00,
8.623601198196411133e-01,5.393143892288208008e-01,7.870722413063049316e-01,1.046023011207580566e+00,
8.593122959136962891e-01,5.390809774398803711e-01,7.870674729347229004e-01,1.045484542846679688e+00,
8.539404869079589844e-01,5.395860671997070312e-01,7.870789170265197754e-01,1.044937252998352051e+00,
8.540410995483398438e-01,5.390207171440124512e-01,7.870808839797973633e-01,1.045629739761352539e+00,
8.460502624511718750e-01,5.392745137214660645e-01,7.870852351188659668e-01,1.045970439910888672e+00,
8.545514941215515137e-01,5.392531156539916992e-01,7.870835661888122559e-01,1.047038793563842773e+00,
8.621927499771118164e-01,5.390229225158691406e-01,7.870966196060180664e-01,1.045847296714782715e+00,
8.502547740936279297e-01,5.396370887756347656e-01,7.870945930480957031e-01,1.044846773147583008e+00,
8.550717234611511230e-01,5.389236211776733398e-01,7.871001958847045898e-01,1.046198606491088867e+00,
8.587821125984191895e-01,5.389887094497680664e-01,7.870883941650390625e-01,1.046094417572021484e+00,
8.551630377769470215e-01,5.395529866218566895e-01,7.871404290199279785e-01,1.046701192855834961e+00,
8.575474023818969727e-01,5.400014519691467285e-01,7.872059941291809082e-01,1.046521782875061035e+00,
8.557007908821105957e-01,5.398921966552734375e-01,7.872021198272705078e-01,1.044847607612609863e+00,
8.581583499908447266e-01,5.398050546646118164e-01,7.871429920196533203e-01,1.045759677886962891e+00,
8.587192296981811523e-01,5.396217703819274902e-01,7.871927618980407715e-01,1.047373175621032715e+00,
8.522949218750000000e-01,5.403850674629211426e-01,7.871350049972534180e-01,1.047397613525390625e+00,
8.591858744621276855e-01,5.407751798629760742e-01,7.871941328048706055e-01,1.046993494033813477e+00,
8.588237762451171875e-01,5.406831502914428711e-01,7.872688174247741699e-01,1.046057820320129395e+00,
8.568151593208312988e-01,5.406668782234191895e-01,7.871326804161071777e-01,1.046712875366210938e+00,
8.485817909240722656e-01,5.401690006256103516e-01,7.873291969299316406e-01,1.047199606895446777e+00,
8.582127690315246582e-01,5.405353307723999023e-01,7.872731685638427734e-01,1.047332406044006348e+00,
8.561248183250427246e-01,5.408065915107727051e-01,7.872660160064697266e-01,1.046912431716918945e+00,
8.610912561416625977e-01,5.406200289726257324e-01,7.872992753982543945e-01,1.046242833137512207e+00,
8.597683310508728027e-01,5.408291220664978027e-01,7.872068285942077637e-01,1.046779036521911621e+00,
8.616940975189208984e-01,5.406909584999084473e-01,7.876289486885070801e-01,1.046440243721008301e+00,
8.599956035614013672e-01,5.410168766975402832e-01,7.874078750610351562e-01,1.046848535537719727e+00,
8.578169345855712891e-01,5.402961373329162598e-01,7.875187397003173828e-01,1.046863675117492676e+00,
8.576061129570007324e-01,5.408830046653747559e-01,7.878501415252685547e-01,1.046555757522583008e+00,
8.709928989410400391e-01,5.407916903495788574e-01,7.872810959815979004e-01,1.046742558479309082e+00,
8.564921021461486816e-01,5.407891273498535156e-01,7.876113057136535645e-01,1.047152042388916016e+00,
8.587830066680908203e-01,5.406808257102966309e-01,7.875961661338806152e-01,1.047634482383728027e+00,
8.607668280601501465e-01,5.404980182647705078e-01,7.876680493354797363e-01,1.047510504722595215e+00,
8.613227605819702148e-01,5.409066677093505859e-01,7.878296375274658203e-01,1.047359704971313477e+00,
8.662017583847045898e-01,5.411546230316162109e-01,7.882626056671142578e-01,1.047023892402648926e+00,
8.681229352951049805e-01,5.409847497940063477e-01,7.886118292808532715e-01,1.047538280487060547e+00,
8.564619421958923340e-01,5.408280491828918457e-01,7.880280613899230957e-01,1.047683000564575195e+00,
8.635548949241638184e-01,5.409441590309143066e-01,7.879641056060791016e-01,1.047343492507934570e+00,
8.594174385070800781e-01,5.406733751296997070e-01,7.882099747657775879e-01,1.047262430191040039e+00,
8.617160320281982422e-01,5.406296253204345703e-01,7.881183028221130371e-01,1.047582030296325684e+00,
8.578538894653320312e-01,5.407981276512145996e-01,7.881829738616943359e-01,1.047180294990539551e+00,
8.693295717239379883e-01,5.406971573829650879e-01,7.883068323135375977e-01,1.047754764556884766e+00,
8.685148358345031738e-01,5.408318042755126953e-01,7.881007790565490723e-01,1.047651886940002441e+00,
8.563010692596435547e-01,5.410448312759399414e-01,7.888653278350830078e-01,1.047407865524291992e+00,
8.645072579383850098e-01,5.412738919258117676e-01,7.890831232070922852e-01,1.047682046890258789e+00,
8.660738468170166016e-01,5.408336520195007324e-01,7.894737720489501953e-01,1.047454357147216797e+00,
8.677067160606384277e-01,5.409737229347229004e-01,7.889707684516906738e-01,1.047271966934204102e+00,
8.650860786437988281e-01,5.411983132362365723e-01,7.884920239448547363e-01,1.047561883926391602e+00,
8.614203333854675293e-01,5.412992238998413086e-01,7.887036204338073730e-01,1.047638773918151855e+00,
8.575267791748046875e-01,5.412150025367736816e-01,7.887315154075622559e-01,1.047350764274597168e+00,
8.687866330146789551e-01,5.411729216575622559e-01,7.884235978126525879e-01,1.047512650489807129e+00,
8.686187267303466797e-01,5.410330891609191895e-01,7.891609072685241699e-01,1.047798871994018555e+00,
8.632908463478088379e-01,5.411006212234497070e-01,7.886328697204589844e-01,1.047592997550964355e+00,
8.655920624732971191e-01,5.408580899238586426e-01,7.882254719734191895e-01,1.047227025032043457e+00,
8.617042303085327148e-01,5.409104228019714355e-01,7.885322570800781250e-01,1.047475814819335938e+00,
8.654494285583496094e-01,5.410637855529785156e-01,7.888838648796081543e-01,1.047822356224060059e+00,
8.657338619232177734e-01,5.410358905792236328e-01,7.893814444541931152e-01,1.047806262969970703e+00,
8.678739070892333984e-01,5.408948063850402832e-01,7.890623211860656738e-01,1.047795534133911133e+00,
8.695325255393981934e-01,5.409280657768249512e-01,7.891191244125366211e-01,1.047705173492431641e+00,
8.677859902381896973e-01,5.410770177841186523e-01,7.898810505867004395e-01,1.047808885574340820e+00,
8.607507944107055664e-01,5.411713123321533203e-01,7.891718745231628418e-01,1.047684311866760254e+00,
8.646253943443298340e-01,5.413500666618347168e-01,7.892555594444274902e-01,1.047864675521850586e+00,
8.694038391113281250e-01,5.413988232612609863e-01,7.886666059494018555e-01,1.047864079475402832e+00,
8.717667460441589355e-01,5.413504838943481445e-01,7.887387275695800781e-01,1.047773122787475586e+00,
8.743053078651428223e-01,5.413574576377868652e-01,7.894467115402221680e-01,1.047793745994567871e+00,
8.598555326461791992e-01,5.414949059486389160e-01,7.892000675201416016e-01,1.047854661941528320e+00,
8.688213229179382324e-01,5.414163470268249512e-01,7.896043062210083008e-01,1.047887682914733887e+00,
8.711172342300415039e-01,5.413796901702880859e-01,7.891862392425537109e-01,1.047840237617492676e+00,
8.695737123489379883e-01,5.414812564849853516e-01,7.908101677894592285e-01,1.047727346420288086e+00,
8.710803389549255371e-01,5.415129661560058594e-01,7.900738716125488281e-01,1.047828912734985352e+00,
8.684210181236267090e-01,5.413581728935241699e-01,7.899377942085266113e-01,1.047807097434997559e+00,
8.675354123115539551e-01,5.415077209472656250e-01,7.899335026741027832e-01,1.047896027565002441e+00,
8.755850791931152344e-01,5.414877533912658691e-01,7.894609570503234863e-01,1.047838687896728516e+00,
8.654393553733825684e-01,5.414794087409973145e-01,7.900531291961669922e-01,1.047890901565551758e+00,
8.717571496963500977e-01,5.415092706680297852e-01,7.895697951316833496e-01,1.047865986824035645e+00,
8.704472184181213379e-01,5.413687825202941895e-01,7.895008325576782227e-01,1.047878742218017578e+00,
8.693782091140747070e-01,5.413057208061218262e-01,7.897406220436096191e-01,1.047876715660095215e+00,
8.647822141647338867e-01,5.412154197692871094e-01,7.896187305450439453e-01,1.047907948493957520e+00,
8.683692812919616699e-01,5.411917567253112793e-01,7.898454666137695312e-01,1.047893762588500977e+00,
8.754028677940368652e-01,5.412093400955200195e-01,7.900227904319763184e-01,1.047898292541503906e+00,
8.712052702903747559e-01,5.413045883178710938e-01,7.889855504035949707e-01,1.047897815704345703e+00,
8.739160895347595215e-01,5.413300991058349609e-01,7.891237735748291016e-01,1.047910690307617188e+00,
8.736104965209960938e-01,5.411430597305297852e-01,7.895451784133911133e-01,1.047901868820190430e+00,
8.765045404434204102e-01,5.411530733108520508e-01,7.899309992790222168e-01,1.047899603843688965e+00,
8.791631460189819336e-01,5.413406491279602051e-01,7.899540662765502930e-01,1.047901391983032227e+00,
8.754667639732360840e-01,5.414926409721374512e-01,7.900736331939697266e-01,1.047882914543151855e+00,
8.653494715690612793e-01,5.412242412567138672e-01,7.895998954772949219e-01,1.047896981239318848e+00,
8.728855252265930176e-01,5.414722561836242676e-01,7.901103496551513672e-01,1.047887444496154785e+00,
8.686267137527465820e-01,5.416389107704162598e-01,7.900307178497314453e-01,1.047878026962280273e+00,
8.697109818458557129e-01,5.414395928382873535e-01,7.894417643547058105e-01,1.047877192497253418e+00,
8.678522706031799316e-01,5.414866805076599121e-01,7.894283533096313477e-01,1.047885894775390625e+00,
8.717479705810546875e-01,5.415837764739990234e-01,7.902485132217407227e-01,1.047895073890686035e+00,
8.853355050086975098e-01,5.415278077125549316e-01,7.900373935699462891e-01,1.047903776168823242e+00,
8.683581352233886719e-01,5.413779020309448242e-01,7.903932929039001465e-01,1.047906160354614258e+00,
8.678925037384033203e-01,5.414456129074096680e-01,7.897999286651611328e-01,1.047895550727844238e+00,
8.748716115951538086e-01,5.415690541267395020e-01,7.895268201828002930e-01,1.047895431518554688e+00,
8.762532472610473633e-01,5.415664315223693848e-01,7.893611788749694824e-01,1.047900676727294922e+00,
8.741353750228881836e-01,5.415702462196350098e-01,7.901145815849304199e-01,1.047866702079772949e+00,
8.688132762908935547e-01,5.414625406265258789e-01,7.903896570205688477e-01,1.047893285751342773e+00,
8.835382461547851562e-01,5.415744781494140625e-01,7.898873090744018555e-01,1.047899007797241211e+00,
8.727159500122070312e-01,5.415450930595397949e-01,7.900448441505432129e-01,1.047882318496704102e+00,
8.775171041488647461e-01,5.414984226226806641e-01,7.894005775451660156e-01,1.047905325889587402e+00,
};

float true_a[4];
char lcd_1[18];
char lcd_2[18];
char lcd_3[18];
char lcd_4[18];
char lcd_5[18];
char lcd_6[18];
char lcd_7[18];
char lcd_8[18];
char lcd_9[18];

int aiInit_f01(void) {
  ai_error err;
  const ai_handle acts[] = { activations_f01 };
  err = ai_network_f01_create_and_init(&network, acts, NULL);
  if (err.type != AI_ERROR_NONE) { while(1); };

  ai_input_f01 = ai_network_f01_inputs_get(network, NULL);
  ai_output_f01 = ai_network_f01_outputs_get(network, NULL);

  return 0;
}
int aiRun_f01(const void *in_data, void *out_data) {
  ai_i32 n_batch;
  ai_error err;
  
  ai_input_f01[0].data = AI_HANDLE_PTR(in_data);
  ai_output_f01[0].data = AI_HANDLE_PTR(out_data);
  n_batch = ai_network_f01_run(network, &ai_input_f01[0], &ai_output_f01[0]);
  if (n_batch != 1) {
      err = ai_network_f01_get_error(network);
  };
	 return 0;
}
int aiInit_fu(void) {
  ai_error err;
  const ai_handle acts[] = { activations_fu };
  err = ai_network_fu_create_and_init(&network, acts, NULL);
  if (err.type != AI_ERROR_NONE) { while(1); };

  ai_input_fu = ai_network_fu_inputs_get(network, NULL);
  ai_output_fu = ai_network_fu_outputs_get(network, NULL);

  return 0;
}
int aiRun_fu(const void *in_data, void *out_data) {
  ai_i32 n_batch;
  ai_error err;
  
  ai_input_fu[0].data = AI_HANDLE_PTR(in_data);
  ai_output_fu[0].data = AI_HANDLE_PTR(out_data);
  n_batch = ai_network_fu_run(network, &ai_input_fu[0], &ai_output_fu[0]);
  if (n_batch != 1) {
      err = ai_network_fu_get_error(network);
  };
	 return 0;
}
int aiInit_fx(void) {
  ai_error err;
  const ai_handle acts[] = { activations_fx };
  err = ai_network_fx_create_and_init(&network, acts, NULL);
  if (err.type != AI_ERROR_NONE) { while(1); };

  ai_input_fx = ai_network_fx_inputs_get(network, NULL);
  ai_output_fx = ai_network_fx_outputs_get(network, NULL);

  return 0;
}
int aiRun_fx(const void *in_data, void *out_data) {
  ai_i32 n_batch;
  ai_error err;
  
  ai_input_fx[0].data = AI_HANDLE_PTR(in_data);
  ai_output_fx[0].data = AI_HANDLE_PTR(out_data);
  n_batch = ai_network_fx_run(network, &ai_input_fx[0], &ai_output_fx[0]);
  if (n_batch != 1) {
      err = ai_network_fx_get_error(network);
  };
	 return 0;
}
int aiInit_fy(void) {
  ai_error err;
  const ai_handle acts[] = { activations_fy };
  err = ai_network_fy_create_and_init(&network, acts, NULL);
  if (err.type != AI_ERROR_NONE) { while(1); };

  ai_input_fy = ai_network_fy_inputs_get(network, NULL);
  ai_output_fy = ai_network_fy_outputs_get(network, NULL);

  return 0;
}
int aiRun_fy(const void *in_data, void *out_data) {
  ai_i32 n_batch;
  ai_error err;
  
  ai_input_fy[0].data = AI_HANDLE_PTR(in_data);
  ai_output_fy[0].data = AI_HANDLE_PTR(out_data);
  n_batch = ai_network_fy_run(network, &ai_input_fy[0], &ai_output_fy[0]);
  if (n_batch != 1) {
      err = ai_network_fy_get_error(network);
  };
	 return 0;
}
int aiInit_f02(void) {
  ai_error err;
  const ai_handle acts[] = { activations_f02 };
  err = ai_network_f02_create_and_init(&network, acts, NULL);
  if (err.type != AI_ERROR_NONE) { while(1); };

  ai_input_f02 = ai_network_f02_inputs_get(network, NULL);
  ai_output_f02 = ai_network_f02_outputs_get(network, NULL);

  return 0;
}
int aiRun_f02(const void *in_data, void *out_data) {
  ai_i32 n_batch;
  ai_error err;
  
  ai_input_f02[0].data = AI_HANDLE_PTR(in_data);
  ai_output_f02[0].data = AI_HANDLE_PTR(out_data);
  n_batch = ai_network_f02_run(network, &ai_input_f02[0], &ai_output_f02[0]);
  if (n_batch != 1) {
      err = ai_network_f02_get_error(network);
  };
	 return 0;
}
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* Enable I-Cache---------------------------------------------------------*/
  SCB_EnableICache();

  /* Enable D-Cache---------------------------------------------------------*/
  SCB_EnableDCache();

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */

  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_CRC_Init();
  MX_FMC_Init();
  MX_X_CUBE_AI_Init();
  /* USER CODE BEGIN 2 */
	LCD_Init();
  POINT_COLOR=RED; 	
  aiInit_f01();
	aiRun_f01(input_f01,output_f01);
	int k=0;
	for (int j = 0; j < 4;j++) {
       for (int i = j; i < 56; i += 4) {
          if (k < 56) {
             input_f02[k++] = output_f01[i];
            }
        }
    }

	aiInit_f02();
	aiRun_f02(input_f02,output_f02);
	memcpy(input_fx0,output_f02,sizeof(input_fx0));
	aiInit_fx();
	aiRun_fx(input_fx0,output_fx0);

	//循环输入fu
	for(int i=0;i<128;i++)
		{
			for (int j=0; j <10; j++) {
       input_fu[j] = input_fu_a[i][j];}
	 aiInit_fu();	
	 aiRun_fu(input_fu,output_fu);

	 //将fx和fu相加
	 float *ptr_fx0= output_fx0;
   float *ptr_fu = output_fu;
   float *ptr_fx = input_fx;
   for (int m=0;m<48;m++) {
       *ptr_fx = *ptr_fx0+ *ptr_fu;
        ptr_fx0++;
        ptr_fu++;
        ptr_fx++;
    }
	memcpy(input_fy,input_fx,sizeof(input_fy));
	//计算fy输出
	aiInit_fy();
	aiRun_fy(input_fy,output_fy);
	printf("output is\r\n");
	for(int i=0;i<4;i++)
	{printf("%f\r\n",output_fy[i]);}
  for (int j=0; j <4; j++) 
  {true_a[j] = true_value[i][j];}
	float mse=0;
	for(int i=0;i<4;i++)
	{
		float diff=(true_a[i] - output_fy[i])*100;
	  mse+=diff*diff/4;}
	LCD_Clear(WHITE);
	LCD_ShowString(80,20,240,24,24,"RESULT");

	LCD_ShowString(30,50,220,16,16,"Permanent magnet");
	sprintf((char*)lcd_1,"pred:%.1f C",output_fy[0]*100);
	LCD_ShowString(60,70,220,16,16,lcd_1);
	sprintf((char*)lcd_5,"true:%.1f C",true_a[0]*100);
	LCD_ShowString(60,90,220,16,16,lcd_5);
	
	LCD_ShowString(30,110,220,16,16,"Stator yoke");
  sprintf((char*)lcd_2,"pred:%.1f C",output_fy[1]*100);
	LCD_ShowString(60,130,220,16,16,lcd_2);
	sprintf((char*)lcd_6,"true:%.1f C",true_a[1]*100);
	LCD_ShowString(60,150,220,16,16,lcd_6);
	
	LCD_ShowString(30,170,220,16,16,"Stator teeth");
	sprintf((char*)lcd_3,"pred:%.1f C",output_fy[2]*100);
	LCD_ShowString(60,190,220,16,16,lcd_3);
	sprintf((char*)lcd_7,"true:%.1f C",true_a[2]*100);
	LCD_ShowString(60,210,220,16,16,lcd_7);
	
	LCD_ShowString(30,230,220,16,16,"Stator winding");
	sprintf((char*)lcd_4,"pred:%.1f C",output_fy[3]*100);
	LCD_ShowString(60,250,220,16,16,lcd_4);
	sprintf((char*)lcd_8,"true:%.1f C",true_a[3]*100);
	LCD_ShowString(60,270,220,16,16,lcd_8);
	
	sprintf((char*)lcd_9,"MSE:%f",mse);
	LCD_ShowString(60,300,220,16,16,lcd_9);
//	HAL_Delay(1000);
	
	aiInit_fx();
	aiRun_fx(input_fx,output_fx); 
	memcpy(output_fx0,output_fx,sizeof(output_fx0));
 }
	//printf("output is\r\n");
	//for(int i=0;i<4;i++)
	//{printf("%f\r\n",output_fy[i]);}	
  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {
    /* USER CODE END WHILE */

  //MX_X_CUBE_AI_Process();
    /* USER CODE BEGIN 3 */
  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};

  /** Supply configuration update enable
  */
  HAL_PWREx_ConfigSupply(PWR_LDO_SUPPLY);

  /** Configure the main internal regulator output voltage
  */
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);

  while(!__HAL_PWR_GET_FLAG(PWR_FLAG_VOSRDY)) {}

  __HAL_RCC_SYSCFG_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE0);

  while(!__HAL_PWR_GET_FLAG(PWR_FLAG_VOSRDY)) {}

  /** Initializes the RCC Oscillators according to the specified parameters
  * in the RCC_OscInitTypeDef structure.
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
  RCC_OscInitStruct.HSEState = RCC_HSE_ON;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
  RCC_OscInitStruct.PLL.PLLM = 5;
  RCC_OscInitStruct.PLL.PLLN = 160;
  RCC_OscInitStruct.PLL.PLLP = 2;
  RCC_OscInitStruct.PLL.PLLQ = 20;
  RCC_OscInitStruct.PLL.PLLR = 2;
  RCC_OscInitStruct.PLL.PLLRGE = RCC_PLL1VCIRANGE_2;
  RCC_OscInitStruct.PLL.PLLVCOSEL = RCC_PLL1VCOWIDE;
  RCC_OscInitStruct.PLL.PLLFRACN = 0;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }

  /** Initializes the CPU, AHB and APB buses clocks
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2
                              |RCC_CLOCKTYPE_D3PCLK1|RCC_CLOCKTYPE_D1PCLK1;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.SYSCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_HCLK_DIV2;
  RCC_ClkInitStruct.APB3CLKDivider = RCC_APB3_DIV2;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_APB1_DIV2;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_APB2_DIV2;
  RCC_ClkInitStruct.APB4CLKDivider = RCC_APB4_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)
  {
    Error_Handler();
  }
}

/* USER CODE BEGIN 4 */

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  __disable_irq();
  while (1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     ex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */
